{"ast":null,"code":"import _objectWithoutProperties from \"/Users/dmytropechunka/Desktop/main/projects/slavik/mern/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _regeneratorRuntime from \"/Users/dmytropechunka/Desktop/main/projects/slavik/mern/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/dmytropechunka/Desktop/main/projects/slavik/mern/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"/Users/dmytropechunka/Desktop/main/projects/slavik/mern/src/app/components/admin-route/index.js\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { Route, Redirect } from \"react-router-dom\";\nimport { withRouter } from \"react-router\";\nimport { bindActionCreators } from \"redux\";\nimport { frontloadConnect } from \"react-frontload\";\nimport Cookies from \"js-cookie\";\nimport { getCurrentProfile } from \"../../../modules/profile\";\n\nvar frontload =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(props) {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return props.getCurrentProfile();\n\n          case 2:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function frontload(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar AdminRoute = function AdminRoute(_ref2) {\n  var Component = _ref2.component,\n      rest = _objectWithoutProperties(_ref2, [\"component\"]);\n\n  var currentUser = Cookies.getJSON(\"user\");\n  return React.createElement(Route, Object.assign({}, rest, {\n    render: function render(props) {\n      return currentUser.typeUser === \"admin\" ? React.createElement(Component, Object.assign({}, props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 22\n        },\n        __self: this\n      })) : React.createElement(Redirect, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 24\n        },\n        __self: this\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 17\n    },\n    __self: this\n  }));\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    isAuthenticated: state.auth.isAuthenticated,\n    currentProfile: state.profile.currentProfile\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return bindActionCreators({\n    getCurrentProfile: getCurrentProfile\n  }, dispatch);\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(frontloadConnect(frontload, {\n  onMount: true,\n  onUpdate: false\n})(AdminRoute)));","map":{"version":3,"sources":["/Users/dmytropechunka/Desktop/main/projects/slavik/mern/src/app/components/admin-route/index.js"],"names":["React","connect","Route","Redirect","withRouter","bindActionCreators","frontloadConnect","Cookies","getCurrentProfile","frontload","props","AdminRoute","Component","component","rest","currentUser","getJSON","typeUser","mapStateToProps","state","isAuthenticated","auth","currentProfile","profile","mapDispatchToProps","dispatch","onMount","onUpdate"],"mappings":";;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,KAAT,EAAgBC,QAAhB,QAAgC,kBAAhC;AACA,SAASC,UAAT,QAA2B,cAA3B;AACA,SAASC,kBAAT,QAAmC,OAAnC;AACA,SAASC,gBAAT,QAAiC,iBAAjC;AACA,OAAOC,OAAP,MAAoB,WAApB;AAEA,SAASC,iBAAT,QAAkC,0BAAlC;;AAEA,IAAMC,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAG,iBAAMC,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAqBA,KAAK,CAACF,iBAAN,EAArB;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAATC,SAAS;AAAA;AAAA;AAAA,GAAf;;AAEA,IAAME,UAAU,GAAG,SAAbA,UAAa,QAAuC;AAAA,MAAzBC,SAAyB,SAApCC,SAAoC;AAAA,MAAXC,IAAW;;AACxD,MAAIC,WAAW,GAAGR,OAAO,CAACS,OAAR,CAAgB,MAAhB,CAAlB;AAEA,SACE,oBAAC,KAAD,oBACMF,IADN;AAEE,IAAA,MAAM,EAAE,gBAAAJ,KAAK;AAAA,aAEXK,WAAW,CAACE,QAAZ,KAAyB,OAAzB,GACE,oBAAC,SAAD,oBAAeP,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SADF,GAGE,oBAAC,QAAD;AAAU,QAAA,EAAE,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QALS;AAAA,KAFf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KADF;AAaD,CAhBD;;AAkBA,IAAMQ,eAAe,GAAG,SAAlBA,eAAkB,CAAAC,KAAK;AAAA,SAAK;AAChCC,IAAAA,eAAe,EAAED,KAAK,CAACE,IAAN,CAAWD,eADI;AAEhCE,IAAAA,cAAc,EAAEH,KAAK,CAACI,OAAN,CAAcD;AAFE,GAAL;AAAA,CAA7B;;AAKA,IAAME,kBAAkB,GAAG,SAArBA,kBAAqB,CAAAC,QAAQ;AAAA,SACjCpB,kBAAkB,CAAC;AAAEG,IAAAA,iBAAiB,EAAjBA;AAAF,GAAD,EAAwBiB,QAAxB,CADe;AAAA,CAAnC;;AAGA,eAAerB,UAAU,CACvBH,OAAO,CACLiB,eADK,EAELM,kBAFK,CAAP,CAIElB,gBAAgB,CAACG,SAAD,EAAY;AAC1BiB,EAAAA,OAAO,EAAE,IADiB;AAE1BC,EAAAA,QAAQ,EAAE;AAFgB,CAAZ,CAAhB,CAGGhB,UAHH,CAJF,CADuB,CAAzB","sourcesContent":["import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { Route, Redirect } from \"react-router-dom\";\nimport { withRouter } from \"react-router\";\nimport { bindActionCreators } from \"redux\";\nimport { frontloadConnect } from \"react-frontload\";\nimport Cookies from \"js-cookie\";\n\nimport { getCurrentProfile } from \"../../../modules/profile\";\n\nconst frontload = async props => await props.getCurrentProfile();\n\nconst AdminRoute = ({ component: Component, ...rest }) => {\n  let currentUser = Cookies.getJSON(\"user\");\n\n  return (\n    <Route\n      {...rest}\n      render={props =>\n\n        currentUser.typeUser === \"admin\" ? (\n          <Component {...props} />\n        ) : (\n          <Redirect to={`/`} />\n        )\n      }\n    />\n  );\n};\n\nconst mapStateToProps = state => ({\n  isAuthenticated: state.auth.isAuthenticated,\n  currentProfile: state.profile.currentProfile\n});\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators({ getCurrentProfile }, dispatch);\n\nexport default withRouter(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(\n    frontloadConnect(frontload, {\n      onMount: true,\n      onUpdate: false\n    })(AdminRoute)\n  )\n);\n"]},"metadata":{},"sourceType":"module"}