(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{110:function(e,t,n){},111:function(e,t,n){},112:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(38),c=n(5),i=n(11),u=n.n(i),s=n(21),l=n(27),p=n(6),d=n(52),m=n(4),h=n(20),f=n(22),b=n(9),g=n.n(b),v={currentProfile:{}},E=function(e){return function(e){return new Promise(function(t){var n,r=g.a.getJSON("user");n=Object(f.a)({},r),e({type:"auth/SET_CURRENT_PROFILE",profile:n}),t(n)})}},y=Object(p.c)({auth:h.a,profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"auth/SET_CURRENT_PROFILE":return Object(f.a)({},e,{currentProfile:t.profile});default:return e}}}),O=!("undefined"!==typeof window&&window.document&&window.document.createElement),j=n(13),w=n(14),k=n(16),U=n(15),A=n(17),C=n(23),T=n.n(C),x=n(31),N=n(37),_=n(33),P=n(114),R=[{to:"/tests/admin",text:"All tests",type:"admin"},{to:"/add/doctor",text:"Vytvorit doctora",type:"admin"},{to:"/create",text:"Create test",type:"admin"},{to:"/list/all/doctor",text:"Lists doctors",type:"admin"}],S=[{to:"/list/all/pacient",text:"Lists pacient",type:"doctor"},{to:"/add/pacient",text:"Vytvorit pacienta",type:"doctor"}],D=[{to:"/tests/pacient",text:"Tests",type:"pacient"},{to:"/results/pacient",text:"Results",type:"pacient"}],L=function(e){var t=e.to,n=e.text;return a.a.createElement("li",null,a.a.createElement(P.a,{to:t},n))},W=function(e){function t(e){var n;return Object(j.a)(this,t),(n=Object(k.a)(this,Object(U.a)(t).call(this,e))).onLogout=function(){n.props.logoutUser()},n.state={menu:[{to:"/",text:"Homepage",type:"all"}],user:{}},n}return Object(A.a)(t,e),Object(w.a)(t,[{key:"shouldComponentUpdate",value:function(e){return"admin"===e.user.typeUser&&1===this.state.menu.length?this.setState({menu:[].concat(Object(_.a)(this.state.menu),R)}):"doctor"===e.user.typeUser&&1===this.state.menu.length?this.setState({menu:[].concat(Object(_.a)(this.state.menu),S)}):"pacient"===e.user.typeUser&&1===this.state.menu.length&&this.setState({menu:[].concat(Object(_.a)(this.state.menu),D)}),!0}},{key:"render",value:function(){var e=this,t=this.state.menu;return a.a.createElement("header",{className:"uk-section-primary uk-preserve-color uk-margin-bottom"},a.a.createElement("div",{className:"uk-navbar-container uk-container","uk-navbar":""},a.a.createElement("div",{className:"uk-navbar-left "},a.a.createElement("a",{className:"uk-navbar-item uk-logo uk-preserve-color",href:"/"},"Dotaznik"),a.a.createElement("ul",{className:"uk-navbar-nav"},t.map(function(t,n){var r=a.a.createElement(L,Object.assign({key:n},t));return t.hasOwnProperty("auth")?t.auth&&"admin"===t.type&&"admin"===e.props.user.typeUser?r:t.auth&&"admin"!==t.type?r:t.auth||e.props.isAuthenticated?null:r:r}))),a.a.createElement("div",{className:"uk-navbar-right"},a.a.createElement("ul",{className:"uk-navbar-nav"},a.a.createElement("li",null,a.a.createElement("a",{href:"/"},a.a.createElement("span",{className:"uk-icon uk-margin-small-right","uk-icon":"icon: user"}),this.props.user.name+" "+this.props.user.surname)),a.a.createElement("li",null,this.props.isAuthenticated?a.a.createElement("a",{nohref:"",onClick:this.onLogout},"Log out"):a.a.createElement("a",{href:"/"},"Sing In"))))))}}]),t}(r.Component),X=Object(c.connect)(null,function(e){return Object(p.b)({logoutUser:h.c},e)})(W),z=n(117),J=n(115),I=n(12),M=n(116),F=Object(c.connect)(function(e){return{isAuthenticated:e.auth.isAuthenticated}},null)(function(e){var t=e.component,n=Object(I.a)(e,["component"]),r=g.a.getJSON("user");return a.a.createElement(J.a,Object.assign({},n,{render:function(e){return!r||"admin"!==r.typeUser&&"pacient"!==r.typeUser&&"doctor"!==r.typeUser?a.a.createElement(M.a,{to:"/login"}):a.a.createElement(t,e)}}))}),H=function(){var e=Object(x.a)(T.a.mark(function e(t){return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getCurrentProfile();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),V=Object(N.a)(Object(c.connect)(function(e){return{isAuthenticated:e.auth.isAuthenticated,currentProfile:e.profile.currentProfile}},function(e){return Object(p.b)({getCurrentProfile:E},e)})(Object(s.frontloadConnect)(H,{onMount:!0,onUpdate:!1})(function(e){var t=e.component,n=Object(I.a)(e,["component"]),r=g.a.getJSON("user");return a.a.createElement(J.a,Object.assign({},n,{render:function(e){return r&&"admin"===r.typeUser?a.a.createElement(t,e):a.a.createElement(M.a,{to:"/"})}}))}))),q=Object(c.connect)(function(e){return{isAuthenticated:e.auth.isAuthenticated}},null)(function(e){var t=e.component,n=Object(I.a)(e,["component"]),r=g.a.getJSON("user");return a.a.createElement(J.a,Object.assign({},n,{render:function(e){return!r||"admin"!==r.typeUser&&"doctor"!==r.typeUser?a.a.createElement(M.a,{to:"/"}):a.a.createElement(t,e)}}))}),B=n(53),$=n.n(B),G=Object(c.connect)(function(e){return{isAuthenticated:e.auth.isAuthenticated}},null)(function(e){var t=e.component,n=Object(I.a)(e,["component"]),r=$.a.parse(n.location.search);return a.a.createElement(J.a,Object.assign({},n,{render:function(e){return n.isAuthenticated?a.a.createElement(M.a,{to:r.redirect||"/"}):a.a.createElement(t,e)}}))}),K=n(41),Q=function(){return a.a.createElement(K.a,{id:"not-found",title:"Not Found",description:"This is embarrassing.",noCrawl:!0},a.a.createElement("p",null,"Super embarrassing."))},Y=u()({loader:function(){return n.e(0).then(n.bind(null,118))},loading:function(){return null},modules:["homepage"]}),Z=u()({loader:function(){return n.e(1).then(n.bind(null,119))},loading:function(){return null},modules:["login"]}),ee=u()({loader:function(){return n.e(3).then(n.bind(null,120))},loading:function(){return null},modules:["tests"]}),te=u()({loader:function(){return n.e(3).then(n.bind(null,121))},loading:function(){return null},modules:["results"]}),ne=u()({loader:function(){return n.e(3).then(n.bind(null,122))},loading:function(){return null},modules:["results-view"]}),re=u()({loader:function(){return n.e(3).then(n.bind(null,123))},loading:function(){return null},modules:["list"]}),ae=u()({loader:function(){return n.e(3).then(n.bind(null,126))},loading:function(){return null},modules:["add-user"]}),oe=u()({loader:function(){return n.e(3).then(n.bind(null,124))},loading:function(){return null},modules:["test-full"]}),ce=u()({loader:function(){return n.e(3).then(n.bind(null,125))},loading:function(){return null},modules:["create"]}),ie=function(e){function t(){return Object(j.a)(this,t),Object(k.a)(this,Object(U.a)(t).apply(this,arguments))}return Object(A.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return a.a.createElement(z.a,null,a.a.createElement(F,{exact:!0,path:"/",component:Y}),a.a.createElement(F,{exact:!0,path:"/tests/:user",component:ee}),a.a.createElement(F,{exact:!0,path:"/tests/pacient/:id",component:oe}),a.a.createElement(F,{exact:!0,path:"/results/pacient",component:te}),a.a.createElement(F,{exact:!0,path:"/view/results/:id",component:ne}),a.a.createElement(q,{exact:!0,path:"/list/all/:user",component:re}),a.a.createElement(q,{exact:!0,path:"/add/:typeUser",component:ae}),a.a.createElement(q,{exact:!0,path:"/user/edit/:id",component:ae}),a.a.createElement(V,{exact:!0,path:"/create/:id",component:ce}),a.a.createElement(V,{exact:!0,path:"/create",component:ce}),a.a.createElement(G,{exact:!0,path:"/login",component:Z}),a.a.createElement(J.a,{component:Q}))}}]),t}(r.Component),ue=(n(110),function(){var e=Object(x.a)(T.a.mark(function e(t){return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getCurrentProfile();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),se=function(e){function t(){return Object(j.a)(this,t),Object(k.a)(this,Object(U.a)(t).apply(this,arguments))}return Object(A.a)(t,e),Object(w.a)(t,[{key:"componentWillMount",value:function(){O||this.props.establishCurrentUser()}},{key:"render",value:function(){return a.a.createElement("div",{id:"app"},a.a.createElement(X,{isAuthenticated:this.props.isAuthenticated,user:this.props.currentProfile}),a.a.createElement(ie,{typeUser:this.props.currentProfile.typeUser}))}}]),t}(r.Component),le=Object(N.a)(Object(c.connect)(function(e){return{isAuthenticated:e.auth.isAuthenticated,currentProfile:e.profile.currentProfile}},function(e){return Object(p.b)({establishCurrentUser:h.b,getCurrentProfile:E},e)})(Object(s.frontloadConnect)(ue,{onMount:!0,onUpdate:!1})(se))),pe=(n(111),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function de(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=O?Object(m.c)({initialEntries:[e]}):Object(m.a)(),n=[d.a,Object(l.routerMiddleware)(t)],r=p.d.apply(void 0,[p.a.apply(void 0,n)].concat([])),a=O?{}:window.__PRELOADED_STATE__;return O||delete window.__PRELOADED_STATE__,{store:Object(p.e)(Object(l.connectRouter)(t)(y),a,r),history:t}}(),he=me.store,fe=me.history,be=a.a.createElement(c.Provider,{store:he},a.a.createElement(l.ConnectedRouter,{history:fe},a.a.createElement(s.Frontload,{noServerRender:!0},a.a.createElement(le,null)))),ge=document.querySelector("#root");!0===ge.hasChildNodes()?u.a.preloadReady().then(function(){Object(o.hydrate)(be,ge)}):Object(o.render)(be,ge),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");pe?(function(e,t){fetch(e).then(function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):de(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):de(t,e)})}}()},20:function(e,t,n){"use strict";n.d(t,"d",function(){return i}),n.d(t,"b",function(){return u}),n.d(t,"c",function(){return s});var r=n(22),a=n(9),o=n.n(a),c=(n(40),{isAuthenticated:!1,currentUser:{}});t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"auth/AUTHENTICATE":return Object(r.a)({},e,{isAuthenticated:t.authenticated});case"auth/SET_CURRENT_USER":return Object(r.a)({},e,{currentUser:t.user});default:return e}};var i=function(e){return function(t){return new Promise(function(n){t({type:"auth/SET_CURRENT_USER",user:e}),o.a.set("user",e),t({type:"auth/AUTHENTICATE",authenticated:!0}),n(e)})}},u=function(){return function(e){return new Promise(function(t){var n=o.a.getJSON("user");n?(e(i(n)),t(n)):t({})})}},s=function(){return function(e){return new Promise(function(t){e({type:"auth/AUTHENTICATE",authenticated:!1}),e({type:"auth/SET_CURRENT_USER",user:{}}),o.a.remove("user"),t({})})}}},41:function(e,t,n){"use strict";var r=n(12),a=n(13),o=n(14),c=n(16),i=n(15),u=n(17),s=n(0),l=n.n(s),p=n(37),d=n(54),m=n.n(d),h="https://cra-ssr.herokuapp.com",f=function(e){function t(){return Object(a.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"getMetaTags",value:function(e,t){var n=e.title,r=e.description,a=(e.image,e.contentType),o=e.twitter,c=e.noCrawl,i=e.published,u=e.updated,s=e.category,l=e.tags,p=n?(n+" | Dotaznik").substring(0,60):"Dotaznik",d=r?r.substring(0,155):"D\xedm\u016fv dot\xe1zn\xedk",m=[{itemprop:"name",content:p},{itemprop:"description",content:d},{name:"description",content:d},{name:"twitter:card",content:"summary_large_image"},{name:"twitter:site",content:"@cereallarceny"},{name:"twitter:title",content:p},{name:"twitter:description",content:d},{name:"twitter:creator",content:o||"@cereallarceny"},{property:"og:title",content:p},{property:"og:type",content:a||"website"},{property:"og:url",content:h+t},{property:"og:description",content:d},{property:"og:site_name",content:"Dotaznik"},{property:"fb:app_id",content:"XXXXXXXXX"}];return c&&m.push({name:"robots",content:"noindex, nofollow"}),i&&m.push({name:"article:published_time",content:i}),u&&m.push({name:"article:modified_time",content:u}),s&&m.push({name:"article:section",content:s}),l&&m.push({name:"article:tag",content:l}),m}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.id,a=e.className,o=Object(r.a)(e,["children","id","className"]);return l.a.createElement("main",{id:n,className:a},l.a.createElement(m.a,{htmlAttributes:{lang:"en",itemscope:void 0,itemtype:"http://schema.org/".concat(o.schema||"WebPage")},title:o.title?o.title+" | Dotaznik":"Dotaznik",link:[{rel:"canonical",href:h+this.props.location.pathname}],meta:this.getMetaTags(o,this.props.location.pathname)}),t)}}]),t}(s.Component);t.a=Object(p.a)(f)},55:function(e,t,n){e.exports=n(112)}},[[55,4,5]]]);
//# sourceMappingURL=main.916d45ff.chunk.js.map